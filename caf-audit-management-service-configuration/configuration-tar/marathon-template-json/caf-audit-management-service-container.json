{
  "id": "/${marathon-group}/caf-audit-management-service",
  "cpus": "${caf-audit-management-service-cpus}",
  "mem": "${caf-audit-management-service-mem}",
  "instances": "${caf-audit-management-service-instances}",
  "container": {
    "docker": {
      "image": "${docker-registry}/caf/caf-audit-management-service:${caf-audit-management-service-version}",
      "network": "BRIDGE",
      "portMappings": [
        {
          "containerPort": 8080,
          "hostPort": 0,
          "protocol": "tcp",
          "servicePort": "${caf-audit-management-service-8080-serviceport}"
        }
      ],
      "privileged": true,
      "forcePullImage": "${force-pull}"
    },
    "type": "DOCKER"
  },
  "healthChecks": [
    {
      "protocol": "HTTP",
      "gracePeriodSeconds": "${caf-audit-management-service-healthcheck-graceperiodseconds}",
      "intervalSeconds": "${caf-audit-management-service-healthcheck-intervalseconds}",
      "maxConsecutiveFailures": "${caf-audit-management-service-healthcheck-maxconsecutivefailures}",
      "path": "/",
      "timeoutSeconds": "${caf-audit-management-service-healthcheck-timeoutseconds}"
    }
  ],
  "env": {
    "_JAVA_OPTIONS": "-Xms${caf-audit-management-service-java-mem-min}m -Xmx${caf-audit-management-service-java-mem-max}m",
    "CAF_CONFIG_PATH": "/mnt/mesos/sandbox",
    "CAF_DATABASE_URL": "${caf-audit-management-service-database-url}",
    "CAF_DATABASE_SERVICE_ACCOUNT": "${caf-audit-management-service-database-service-account}",
    "CAF_DATABASE_SERVICE_ACCOUNT_PASSWORD": "${caf-audit-management-service-database-service-account-password}",
    "CAF_DATABASE_LOADER_ACCOUNT": "${caf-audit-management-service-database-loader-account}",
    "CAF_DATABASE_LOADER_ACCOUNT_PASSWORD": "${caf-audit-management-service-database-loader-account-password}",
    "CAF_DATABASE_READER_ROLE": "${caf-audit-management-service-database-reader-role}",
    "CAF_KAFKA_BROKERS": "${caf-audit-management-service-kafka-brokers}",
    "CAF_AUDIT_MANAGEMENT_CLI": "${caf-audit-management-service-cli-image}",
    "CAF_MARATHON_URL": "${caf-audit-scheduler-marathon-url}",
    "CAF_AUDIT_SCHEDULER_MARATHON_CPUS": "${caf-audit-scheduler-marathon-cpus}",
    "CAF_AUDIT_SCHEDULER_MARATHON_MEM": "${caf-audit-scheduler-marathon-mem}",
    "CAF_AUDIT_SCHEDULER_MARATHON_CONTAINER_DOCKER_CREDENTIALS": "${marathon-uris-root}/${docker-login-config}",
    "CAF_AUDIT_SCHEDULER_MARATHON_CONTAINER_DOCKER_FORCEPULLIMAGE": "${caf-audit-scheduler-marathon-container-docker-forcePullImage}",
    "CAF_AUDIT_SCHEDULER_MARATHON_CONTAINER_DOCKER_NETWORK": "${caf-audit-scheduler-marathon-container-docker-network}",
    "CAF_AUDIT_MANAGEMENT_API_CONFIG_PATH": "${caf-audit-management-service-config-path}"
  },
  "uris": [
    "${marathon-uris-root}/${service-config-location}/cfg_${marathon-group}_audit-management-service_KafkaAuditConfiguration",
    "${marathon-uris-root}/${docker-login-config}"
  ]
}

